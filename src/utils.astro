---
import type { MarkdownInstance } from "astro";

export async function getAllPosts(): Promise<MarkdownInstance<Record<string, any>>[]> {
  return await Astro.glob("./pages/posts/*.md");
}

export function getUniqueTags(allPosts: MarkdownInstance<Record<string, any>>[]) {
  return [
    ...new Set(allPosts?.map(({ frontmatter: { tags } }) => tags).flat()),
  ];
};

interface GetFilteredPostsProps {
  tag: string;
  posts: MarkdownInstance<Record<string, any>>[];
}

export function getFilteredPosts({ posts, tag }: GetFilteredPostsProps) {
  return posts?.filter(({ frontmatter: { tags } }) => tags.includes(tag));
};
---
